DAG 全称为有向无环图, 是一个图数据结构, 图中的每个顶点都会指向不定个数的其他顶点, 即有向, 同时不存在从某个顶点出发一条路径指回该顶点, 即无环. DAG 作为一个数学结构, 早在一个世纪前就有应用, 但在区块链领域的探索也是近几年的事. 目前能找到的DAG相关最早在区块链的文献是2013年的“Accelerating Bitcoin’s Transaction Processing Fast Money Grows on Trees, Not Chains”提出的GHOST协议, 之后被以太坊修改后成为底层共识协议. 最早也是最知名DAG项目是2015年的IOTA, 创新得提出了DAG账本Tangle. Tangle具有高度去中心化, 高吞吐量, 无手续费等特点, 得到圈内的高度认可, 长期稳居市值前十. 

区块链近十年的发展遇到了不少问题, 提到这些问题就不得不提Vitalik 提出的可扩展性, 安全性和去中心化的不可能三角, 他认为公链项目最多只能满足其中最多两个技术指标. 需要指出这个不可能三角暂时还未得到学术界的证明, 有一定争议的, 很显然的一个问题就是去中心化是区块链的安全性的基础, 所以两者应该是包含的关系. 他这里的安全性应该特指作恶者对网络的控制力, 比如需要控制1/2算力还是1/3算力.  去中心化和控制力都是安全性的重要组成部分, 而目前主流的区块链项目中安全性和可扩展性之间都存在着矛盾. 典型的就是比特币, 比特币的理论TPS只有7笔, 而随着矿池的过度集中, 全球前6大矿池占据了八成的算力, 比特币已经是一个中心化的网络了; 以太坊有所改善, 但大体类似; 而备受瞩目的EOS项目虽然有着理论上近万的TPS, 但是是以牺牲去中心化为代价.

DAG是目前我们认为能平衡安全性和扩容性最好的技术之一. DAG解决扩容问题的思路非常直观, 简单地说就是提高出块率. 大家有没有想过, 如果把比特币区块大小从1M的限制改成10M或者把出块时间改成一分钟, 是不是TPS瞬间就提高10倍了. 这么简单的方案为什么中本聪当然不会想不到, 是因为这样的方案会带来孤块率提高, 而高孤块率在比特币的最长链共识下会降低安全性. 比如说我们把出块时间降低为一分钟, 意味着难度降低为之前的十分之一, 极端情况下, 可以有十个区块生成. 根据最长链规则, 最终只会有一个区块胜出组成最长链, 其他九个区块被淘汰也就成为了孤块. 而此时最长链聚集的算力只有之前的十分之一, 意味着被推翻的风险也增大为十倍. 既然抛弃区块会造成安全性降低, 那如果保留所有的区块呢, 这样就形成了一个DAG. 所以可以看到本质上区块链就是DAG, 是DAG在出块率极低的区块下的一种特殊情况, 反之提高区块链的出块率就会形成DAG. 形成DAG后, 针对区块链的共识算法如最长链规则已经无法满足要求, 所以各个DAG项目会有各自的DAG共识算法, 这也是区别各大DAG项目最核心的地方. 比如针对tangle的MCMC算法, 针对ByteBall的主链算法. HLC的共识算法会参考GhostDAG协议并加上自己对DAG的一些理解来实现, 该协议是目前为止在去中心, 安全性, 功能性平衡得最好的DAG协议之一.

除了DAG主流的解决扩容问题, 主流的解决扩容问题的方案有链上的分片, 链下的分层. 先说一个常见的误区, 因为DAG可以并发出块, 所以很多人误以为DAG是无限扩容的, 事实上DAG确实可以极大地扩容, 但是仍然会受网络节点计算能力的限制, 这也是DAG被不少业内人士质疑的问题. Vitalik 就曾说过“DAG没有解决任何基础的扩容问题, 只是尽可能降低了交易延迟“, 也有人质疑 ”DAG还是每个节点要处理每笔交易“, 这两个质疑其实说的是同一回事, 就是攻击DAG无法做到无限扩容. 我个人的观点其实跟Vitalik是恰恰相反, 我们探索DAG恰恰是认为DAG是我们目前找到的可以解决基础扩容的最理想的方案. 我们理解的”基础扩容“是建立在最理想区块链模型下的扩容性的极限, 这里的最理想的区块链模型是指网络中每个节点都能参与共识, 而且都是全节点, 拥有完整账本. 如果在最理想模型上去解决扩容问题还不算基础扩容, 我很难理解什么才算基础扩容. 

底层公链是价值承载的基础, 我们希望是它一个最理想的区块链模型, 而且能尽可能多地参与链上计算, 这样能尽可能地增强链的健壮性. 在此基础上, 我们是非常拥抱其他扩容技术, 而且这也是DAG技术的一个容易被人忽略的巨大优势. DAG是数据结构层的技术, 是不容易和分片和分层冲突的, 所以天然地能很好地跟分片和分层技术结合. 事实上, 分片和分层也在我们未来的规划中, 只是我们希望, 我们的无限扩容方案是建立在一个更健康的底层公链的基础之上.